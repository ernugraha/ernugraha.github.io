<!DOCTYPE html>
<html class="{% if site.dash.rtl %}direction--rtl{% else %}direction--ltr{% endif %}"lang="{{ page.lang | default: site.lang | default: "en" }}">

  {%- include head.html -%}

  <body>

    {%- include header.html -%}

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        {{ content }}
      </div>
    </main>

    {%- include footer.html -%}
    <script>
      window.FontAwesomeConfig = {
        searchPseudoElements: true
      }
      document.addEventListener("DOMContentLoaded", function () {
      document.querySelectorAll("pre > code").forEach(function (codeBlock) {
        var button = document.createElement("button");
        button.innerText = "Copy";
        button.style.position = "absolute";
        button.style.top = "6px";
        button.style.right = "6px";
        button.style.padding = "3px 6px";
        button.style.background = "#444";
        button.style.color = "#fff";
        button.style.border = "none";
        button.style.borderRadius = "4px";
        button.style.cursor = "pointer";
        button.style.fontSize = "0.8rem";

        button.addEventListener("click", function () {
          navigator.clipboard.writeText(codeBlock.innerText).then(function () {
            button.innerText = "Copied!";
            setTimeout(() => button.innerText = "Copy", 1500);
          });
        });

        var pre = codeBlock.parentNode;
        pre.style.position = "relative";
        pre.insertBefore(button, codeBlock);
      });
    });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js"></script>
    <script src="/search.json" type="application/json"></script>
    <script>
      async function initSearch() {
        const res = await fetch('/search.json');
        const docs = await res.json();

        const idx = lunr(function () {
          this.ref('url');
          this.field('title');
          this.field('content');

          docs.forEach(doc => this.add(doc));
        });

        const input = document.getElementById('search-input');
        const results = document.getElementById('results-container');

        input.addEventListener('keyup', function () {
          const query = this.value;
          results.innerHTML = '';
          if (query.length > 2) {
            const matches = idx.search(query);
            matches.forEach(match => {
              const doc = docs.find(d => d.url === match.ref);
              const li = document.createElement('li');
              li.innerHTML = `<a href="${doc.url}">${doc.title}</a>`;
              results.appendChild(li);
            });
          }
        });
      }
      initSearch();
    </script>
  </body>

</html>
